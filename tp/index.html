<!DOCTYPE html>
<html lang="en" class="demo-1 no-js">
	<head>
		<meta charset="UTF-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<title>Shape Hover Effect with SVG | Demo 1</title>
		<meta name="description" content="Hover Effects with animated SVG Shapes using Snap.svg" />
		<meta name="keywords" content="animated svg, hover effect, grid, svg shape html, " />
		<meta name="author" content="Codrops" />
		<link rel="shortcut icon" href="../favicon.ico">
		<link rel="stylesheet" type="text/css" href="css/normalize.css" />
		<link rel="stylesheet" type="text/css" href="css/demo.css" />
		<link rel="stylesheet" type="text/css" href="css/component.css" />
		<script src="js/snap.svg-min.js"></script>
		<script src="js/calendar.js" type="text/javascript"></script>
		<script type="text/javascript" src="http://www.parsecdn.com/js/parse-latest.js"></script>
		
		<script type="text/javascript">
			var c = new Calendar("c");
			document.write(c);
		</script>
		
		<style>
			.hidden {
				visibility: hidden;
			}
			.visible{
				visibility: visible;
			}
			span#show{
				margin: 0 20% 0 -5%;
				background-color: #FFFFFF;
				opacity:0.95;
			}
			span#plan{
				margin: 0 20% 0 -5%;
				background-color: #FFFFFF;
				opacity:1.0;
			}
			table{
			width:90%;
			opacity: 1.0;
			margin:5%;
			font-size:20px;
			}
			table, th, td {
			color:black;
			font-size:18px;
			border-collapse: collapse;
			}
			th, td {
			padding: 5px;
			text-align: left;
			}
					table#t1 th	{
			background-color: #FF619C;
			color: white;
			}
			table#t1 tr:nth-child(even) {
			background-color: #FFDEDE;
			}
			table#t1 tr:nth-child(odd) {
			background-color:#FFCCCC;
			}
		</style>
		<!--[if IE]>
		<script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
		<![endif]-->
	</head>
	<body>
		<div class="container">
			<!-- Top Navigation
			<div class="codrops-top clearfix">
							<a class="codrops-icon codrops-icon-prev" href="http://tympanus.net/Development/SVGDrawingAnimation/"><span>Previous Demo</span></a>
							<span class="right"><a href="http://cargocollective.com/isaac317">Artwork by Isaac Montemayor</a><a class="codrops-icon codrops-icon-drop" href="http://tympanus.net/codrops/?p=18145"><span>Back to the Codrops Article</span></a></span>
			</div>-->
			<header class="codrops-header">
				<h1>Transportation.<span>Let's Chain up. </span></h1>
			</header>
			<div class="step">
				<h2>1.請選擇出發日期：<input type="text" name="txt2" onfocus="c.showMoreDay = false;c.show(this);"  /></h2>
			</div>
			<div class="step">
				<h2>2.請選擇交通工具：<span></span></h2>
			</div>
			<section id="grid" class="grid clearfix">
				<a href="#train" data-path-hover="m 180,34.57627 -180,0 L 0,0 180,0 z">
					<figure>
						<img src="img/train.png" />
						<svg viewBox="0 0 180 320" preserveAspectRatio="none"><path d="M 180,160 0,218 0,0 180,0 z"/></svg>
						<figcaption>
						<h2>火車</h2>
						<p>Train</p>
						<button onclick="changeVisibility(0)">Click</button>
						</figcaption>
					</figure>
				</a>
				<a href="#thsr" data-path-hover="m 180,34.57627 -180,0 L 0,0 180,0 z">
					<figure>
						<img src="img/thsr.png" />
						<svg viewBox="0 0 180 320" preserveAspectRatio="none"><path d="M 180,160 0,218 0,0 180,0 z"/></svg>
						<figcaption>
						<h2>高鐵</h2>
						<p>Taiwan High Speed Rail(THSR)</p>
						<button onclick="changeVisibility(1)">Click</button>
						</figcaption>
					</figure>
				</a>
				<a href="#bus" data-path-hover="m 180,34.57627 -180,0 L 0,0 180,0 z">
					<figure>
						<img src="img/bus.png" />
						<svg viewBox="0 0 180 320" preserveAspectRatio="none"><path d="M 180,160 0,218 0,0 180,0 z"/></svg>
						<figcaption>
						<h2>公車</h2>
						<p>Bus</p>
						<button onclick="changeVisibility(2)">Click</button>
						</figcaption>
					</figure>
				</a>
				<a href="#mtr" data-path-hover="m 180,34.57627 -180,0 L 0,0 180,0 z">
					<figure>
						<img src="img/mtr.png" />
						<svg viewBox="0 0 180 320" preserveAspectRatio="none"><path d="M 180,160 0,218 0,0 180,0 z"/></svg>
						<figcaption>
						<h2>捷運</h2>
						<p>Mass Transit Railway(MTR)</p>
						<button onclick="changeVisibility(3)">Click</button>
						</figcaption>
					</figure>
				</a>
				<a id="train" class="hidden" data-path-hover="m 180,34.57627 -180,0 L 0,0 180,0 z">
					<figure>
						<img src="img/train.png" />
						<figcaption>
						<h2>train</h2>
						<form name="train">
							<br>From<br>
							<select name="major" size="1" onChange="redirect(this.options.selectedIndex,0)">
								<option>台北</option>
								<option>桃園</option>
								<option>新竹</option>
								<option>苗栗</option>
								<option>台中</option>
								<option>彰化</option>
								<option>雲林</option>
								<option>嘉義</option>
								<option>台南</option>
								<option>高雄</option>
								<option>屏東</option>
								<option>台東</option>
								<option>花蓮</option>
								<option>宜蘭</option>
								<option>平溪線</option>
								<option>內灣線</option>
								<option>集集線</option>
								<option>沙崙線</option>
								<option>深奧線</option>
							</select>
							<select name="sub1" size="1" id = "train_from">
								<option value="..">福隆</option>
								<option value="..">貢寮</option>
								<option value="..">雙溪</option>
								<option value="..">牡丹</option>
								<option value="..">三貂嶺</option>
								<option value="..">侯硐</option>
								<option value="..">瑞芳</option>
								<option value="..">四腳亭</option>
								<option value="..">暖暖</option>
								<option value="..">基隆</option>
								<option value="..">八堵</option>
								<option value="..">七堵</option>
								<option value="..">五堵</option>
								<option value="..">汐止</option>
								<option value="..">南港</option>
								<option value="..">松山</option>
								<option value="..">台北</option>
								<option value="..">萬華</option>
								<option value="..">板橋</option>
								<option value="..">浮洲</option>
								<option value="..">樹林</option>
								<option value="..">山佳</option>
								<option value="..">鶯歌</option>
							</select>
							<br>To<br>
							<select name="major2" size="1" onChange="redirect(this.options.selectedIndex,1)">
								<option>台北</option>
								<option>桃園</option>
								<option>新竹</option>
								<option>苗栗</option>
								<option>台中</option>
								<option>彰化</option>
								<option>雲林</option>
								<option>嘉義</option>
								<option>台南</option>
								<option>高雄</option>
								<option>屏東</option>
								<option>台東</option>
								<option>花蓮</option>
								<option>宜蘭</option>
								<option>平溪線</option>
								<option>內灣線</option>
								<option>集集線</option>
								<option>沙崙線</option>
								<option>深奧線</option>
							</select>
							<select name="sub2" size="1" id = "train_to">
								<option value="..">福隆</option>
								<option value="..">貢寮</option>
								<option value="..">雙溪</option>
								<option value="..">牡丹</option>
								<option value="..">三貂嶺</option>
								<option value="..">侯硐</option>
								<option value="..">瑞芳</option>
								<option value="..">四腳亭</option>
								<option value="..">暖暖</option>
								<option value="..">基隆</option>
								<option value="..">八堵</option>
								<option value="..">七堵</option>
								<option value="..">五堵</option>
								<option value="..">汐止</option>
								<option value="..">南港</option>
								<option value="..">松山</option>
								<option value="..">台北</option>
								<option value="..">萬華</option>
								<option value="..">板橋</option>
								<option value="..">浮洲</option>
								<option value="..">樹林</option>
								<option value="..">山佳</option>
								<option value="..">鶯歌</option>
							</select>
							<br>At<br>
							<select name="type" size="1" id = "train_time">
								<option>00:00</option>
								<option>01:00</option>
								<option>02:00</option>
								<option>03:00</option>
								<option>04:00</option>
								<option>05:00</option>
								<option>06:00</option>
								<option>07:00</option>
								<option>08:00</option>
								<option>09:00</option>
								<option>10:00</option>
								<option>11:00</option>
								<option>12:00</option>
								<option>13:00</option>
								<option>14:00</option>
								<option>15:00</option>
								<option>16:00</option>
								<option>17:00</option>
								<option>18:00</option>
								<option>19:00</option>
								<option>20:00</option>
								<option>21:00</option>
								<option>22:00</option>
								<option>23:00</option>
							</select>
							<br>Type<br>
							<select name="type" size="1" id = "train_type">
								<option>對號</option>
								<option>非對號</option>
								<option>全部</option>
							</select>
							<button onclick="search()" >submit</button>
						</form>
						</figcaption>
					</figure>
				</a>
				<a href="#" id="thsr" class="hidden" data-path-hover="m 180,34.57627 -180,0 L 0,0 180,0 z">
					<figure>
						<img src="img/thsr.png" />
						<svg viewBox="0 0 180 320" preserveAspectRatio="none"><path d="M 180,160 0,218 0,0 180,0 z"/></svg>
						<figcaption>
						<h2>THSR</h2>
						<p></p>
						<button>submit</button>
						</figcaption>
					</figure>
				</a>
				<a href="#" id="bus" class="hidden" data-path-hover="m 180,34.57627 -180,0 L 0,0 180,0 z">
					<figure>
						<img src="img/bus.png" style="opacity:0.1;"/>
						<svg viewBox="0 0 180 320" preserveAspectRatio="none"><path d="M 180,160 0,218 0,0 180,0 z"/></svg>
						<figcaption>
						<h2>bus</h2>
						<p></p>
						<button>Submit</button>
						</figcaption>
					</figure>
				</a>
				<a href="#" id="mtr" class="hidden" data-path-hover="m 180,34.57627 -180,0 L 0,0 180,0 z">
					<figure>
						<img src="img/8.png" />
						<svg viewBox="0 0 180 320" preserveAspectRatio="none"><path d="M 180,160 0,218 0,0 180,0 z"/></svg>
						<figcaption>
						<h2>MTR</h2>
						<p></p>
						<button>Submit</button>
						</figcaption>
					</figure>
				</a>
			</section>
			<div class="step" id="step-three">
				<h2>3.請勾選想要的行程：<span><br></span>
				<span id="show" class="grid clearfix">
					<table id="t1">
						<tr>
							<th></th>
							<th>中壢 -> 台南</th>
							<th>By</th>
							<th>Spend</th>
							<th>Cost</th>
						</tr>
						<tr>
							<td><input type="checkbox" value="Travel" name="Interest"></td>
							<td>06:11 -> 10:41</td>
							<td>莒光543</td>
							<td>4hr36min</td>
							<td>NT500</td>
						</tr>
						<tr>
							<td><input type="checkbox" value="Travel" name="Interest"></td>
							<td>07:11 -> 10:55</td>
							<td>自強103</td>
							<td>3hr44min</td>
							<td>NT649</td>
						</tr>
					</table>
				</span></h2>
			</div>
			<div class="step" id="step-four">
				<h2>4.Let's Chain up：<span><br></span>
				<span id="plan"  class="grid clearfix"><p>test</p></span>
			</h2>
			</div>
		</div>
		<!-- /container -->
		<script>
			(function() {
		
				function init() {
					var speed = 250,
						easing = mina.easeinout;
					[].slice.call ( document.querySelectorAll( '#grid > a' ) ).forEach( function( el ) {
						var s = Snap( el.querySelector( 'svg' ) ), path = s.select( 'path' ),
							pathConfig = {
								from : path.attr( 'd' ),
								to : el.getAttribute( 'data-path-hover' )
							};
						el.addEventListener( 'mouseenter', function() {
							path.animate( { 'path' : pathConfig.to }, speed, easing );
						} );
						el.addEventListener( 'mouseleave', function() {
							path.animate( { 'path' : pathConfig.from }, speed, easing );
						} );
					} );
				}
				init();
			})();
			function changeVisibility(btn){
				if(btn==0)
				{
					if(document.getElementById("train").className == "hidden")
					{
						document.getElementById("train").className = "visible";
					}
					else if(document.getElementById("train").className == "visible")
					{
						document.getElementById("train").className = "hidden";
					}
				}
				else if(btn==1)
				{
					if(document.getElementById("thsr").className == "hidden")
					{
						document.getElementById("thsr").className = "visible";
					}
					else if(document.getElementById("thsr").className == "visible")
					{
						document.getElementById("thsr").className = "hidden";
					}
				}
				else if(btn==2)
				{
					if(document.getElementById("bus").className == "hidden")
					{
						document.getElementById("bus").className = "visible";
					}
					else if(document.getElementById("bus").className == "visible")
					{
						document.getElementById("bus").className = "hidden";
					}
				}
				else if(btn==3)
				{
					if(document.getElementById("mtr").className == "hidden")
					{
						document.getElementById("mtr").className = "visible";
					}
					else if(document.getElementById("mtr").className == "visible")
					{
						document.getElementById("mtr").className = "hidden";
					}
				}
			}
		</script>
		<script language="JavaScript">
			var groups=document.train.major.options.length
			var group=new Array(groups)
			for (i=0; i<groups; i++){
				group[i]=new Array();
			}
			group[0][0]=new Option("福隆","..")
			group[0][1]=new Option("貢寮","..")
			group[0][2]=new Option("雙溪","..")
			group[0][3]=new Option("牡丹","..")
			group[0][4]=new Option("三貂嶺","..")
			group[0][5]=new Option("猴硐","..")
			group[0][6]=new Option("瑞芳","..")
			group[0][7]=new Option("四腳亭","..")
			group[0][8]=new Option("暖暖","..")
			group[0][9]=new Option("基隆","..")
			group[0][10]=new Option("三坑","..")
			group[0][11]=new Option("八堵","..")
			group[0][12]=new Option("七堵","..")
			group[0][13]=new Option("百福","..")
			group[0][14]=new Option("五堵","..")
			group[0][15]=new Option("汐止","..")
			group[0][16]=new Option("汐科","..")
			group[0][17]=new Option("南港","..")
			group[0][18]=new Option("松山","..")
			group[0][19]=new Option("台北","..")
			group[0][20]=new Option("萬華","..")
			group[0][21]=new Option("板橋","..")
			group[0][22]=new Option("浮洲","..")
			group[0][23]=new Option("樹林","..")
			group[0][24]=new Option("山佳","..")
			group[0][25]=new Option("鶯歌","..")
			group[1][0]=new Option("桃園","..")
			group[1][1]=new Option("內壢","..")
			group[1][2]=new Option("中壢","..")
			group[1][3]=new Option("埔心","..")
			group[1][4]=new Option("楊梅","..")
			group[1][6]=new Option("富岡","..")
			group[2][0]=new Option("湖口","..")
			group[2][1]=new Option("新豐","..")
			group[2][2]=new Option("竹北","..")
			group[2][3]=new Option("北新竹","..")
			group[2][4]=new Option("新竹","..")
			group[2][5]=new Option("香山","..")
			group[3][0]=new Option("崎頂","..")
			group[3][1]=new Option("竹南","..")
			group[3][2]=new Option("談文","..")
			group[3][3]=new Option("大山","..")
			group[3][4]=new Option("後龍","..")
			group[3][5]=new Option("龍港","..")
			group[3][6]=new Option("白沙屯","..")
			group[3][7]=new Option("新埔","..")
			group[3][8]=new Option("通霄","..")
			group[3][9]=new Option("苑裡","..")
			group[3][10]=new Option("造橋","..")
			group[3][11]=new Option("豐富","..")
			group[3][12]=new Option("苗栗","..")
			group[3][13]=new Option("南勢","..")
			group[3][14]=new Option("銅鑼","..")
			group[3][15]=new Option("三義","..")
			group[4][0]=new Option("日南","..")
			group[4][1]=new Option("大甲","..")
			group[4][2]=new Option("台中港","..")
			group[4][3]=new Option("清水","..")
			group[4][4]=new Option("沙鹿","..")
			group[4][5]=new Option("龍井","..")
			group[4][6]=new Option("大肚","..")
			group[4][7]=new Option("追分","..")
			group[4][8]=new Option("泰安","..")
			group[4][9]=new Option("后里","..")
			group[4][10]=new Option("豐原","..")
			group[4][11]=new Option("潭子","..")
			group[4][12]=new Option("太原","..")
			group[4][13]=new Option("台中","..")
			group[4][14]=new Option("大慶","..")
			group[4][15]=new Option("烏日","..")
			group[4][16]=new Option("新烏日","..")
			group[4][17]=new Option("成功","..")
			group[5][0]=new Option("彰化","..")
			group[5][1]=new Option("花壇","..")
			group[5][2]=new Option("大村","..")
			group[5][3]=new Option("員林","..")
			group[5][4]=new Option("永靖","..")
			group[5][5]=new Option("社頭","..")
			group[5][6]=new Option("田中","..")
			group[5][7]=new Option("二水","..")
			group[6][0]=new Option("林內","..")
			group[6][1]=new Option("石榴","..")
			group[6][2]=new Option("斗六","..")
			group[6][3]=new Option("斗南","..")
			group[6][4]=new Option("石龜","..")
			group[7][0]=new Option("大林","..")
			group[7][1]=new Option("民雄","..")
			group[7][2]=new Option("嘉北","..")
			group[7][3]=new Option("嘉義","..")
			group[7][4]=new Option("水上","..")
			group[7][5]=new Option("南靖","..")
			//台南
			group[8][0]=new Option("後壁","..")
			group[8][1]=new Option("新營","..")
			group[8][2]=new Option("柳營","..")
			group[8][3]=new Option("林鳳營","..")
			group[8][4]=new Option("隆田","..")
			group[8][5]=new Option("拔林","..")
			group[8][6]=new Option("善化","..")
			group[8][7]=new Option("南科","..")
			group[8][8]=new Option("新市","..")
			group[8][9]=new Option("永康","..")
			group[8][10]=new Option("大橋","..")
			group[8][11]=new Option("台南","..")
			group[8][12]=new Option("保安","..")
			group[8][14]=new Option("仁德","..")
			group[8][15]=new Option("中洲","..")
			group[8][16]=new Option("長榮大學","..")
			group[8][17]=new Option("沙崙","..")
			//高雄
			group[9][0]=new Option("大湖","..")
			group[9][1]=new Option("路竹","..")
			group[9][2]=new Option("岡山","..")
			group[9][3]=new Option("橋頭","..")
			group[9][4]=new Option("楠梓","..")
			group[9][5]=new Option("新左營","..")
			group[9][6]=new Option("左營","..")
			group[9][7]=new Option("高雄","..")
			group[9][8]=new Option("鳳山","..")
			group[9][9]=new Option("後庄","..")
			group[9][10]=new Option("九曲堂","..")
			//屏東
			group[10][0]=new Option("六塊厝","..")
			group[10][1]=new Option("屏東","..")
			group[10][2]=new Option("歸來","..")
			group[10][3]=new Option("麟洛","..")
			group[10][4]=new Option("西勢","..")
			group[10][5]=new Option("竹田","..")
			group[10][6]=new Option("潮州","..")
			group[10][7]=new Option("崁頂","..")
			group[10][8]=new Option("南州","..")
			group[10][9]=new Option("鎮安","..")
			group[10][10]=new Option("林邊","..")
			group[10][11]=new Option("佳冬","..")
			group[10][12]=new Option("東海","..")
			group[10][13]=new Option("枋寮","..")
			group[10][14]=new Option("加祿","..")
			group[10][15]=new Option("內獅","..")
			group[10][16]=new Option("枋山","..")
			//台東
			group[11][0]=new Option("古莊","..")
			group[11][1]=new Option("大武","..")
			group[11][2]=new Option("瀧溪","..")
			group[11][3]=new Option("多良","..")
			group[11][4]=new Option("金崙","..")
			group[11][5]=new Option("太麻里","..")
			group[11][6]=new Option("知本","..")
			group[11][7]=new Option("康樂","..")
			group[11][16]=new Option("池上","..")
			group[11][15]=new Option("海端","..")
			group[11][14]=new Option("關山","..")
			group[11][13]=new Option("月美","..")
			group[11][12]=new Option("瑞和","..")
			group[11][11]=new Option("瑞源","..")
			group[11][10]=new Option("鹿野","..")
			group[11][9]=new Option("山里","..")
			group[11][8]=new Option("台東","..")
			//花蓮
			group[12][25]=new Option("和平","..")
			group[12][24]=new Option("和仁","..")
			group[12][23]=new Option("崇德","..")
			group[12][22]=new Option("新城","..")
			group[12][21]=new Option("景美","..")
			group[12][20]=new Option("北埔","..")
			group[12][19]=new Option("花蓮","..")
			group[12][18]=new Option("吉安","..")
			group[12][17]=new Option("志學","..")
			group[12][16]=new Option("平和","..")
			group[12][15]=new Option("壽豐","..")
			group[12][14]=new Option("豐田","..")
			group[12][13]=new Option("溪口","..")
			group[12][12]=new Option("南平","..")
			group[12][11]=new Option("鳳林","..")
			group[12][10]=new Option("萬榮","..")
			group[12][9]=new Option("光復","..")
			group[12][8]=new Option("大富","..")
			group[12][7]=new Option("富源","..")
			group[12][6]=new Option("瑞穗","..")
			group[12][5]=new Option("三民","..")
			group[12][4]=new Option("玉里","..")
			group[12][3]=new Option("安通","..")
			group[12][2]=new Option("東里","..")
			group[12][1]=new Option("東竹","..")
			group[12][0]=new Option("富里","..")
			//宜蘭
			group[13][21]=new Option("石城","..")
			group[13][20]=new Option("大里","..")
			group[13][19]=new Option("大溪","..")
			group[13][18]=new Option("龜山","..")
			group[13][17]=new Option("外澳","..")
			group[13][16]=new Option("頭城","..")
			group[13][15]=new Option("頂埔","..")
			group[13][14]=new Option("礁溪","..")
			group[13][13]=new Option("四城","..")
			group[13][12]=new Option("宜蘭","..")
			group[13][11]=new Option("二結","..")
			group[13][10]=new Option("中里","..")
			group[13][9]=new Option("羅東","..")
			group[13][8]=new Option("冬山","..")
			group[13][7]=new Option("新馬","..")
			group[13][6]=new Option("蘇澳新","..")
			group[13][5]=new Option("蘇澳","..")
			group[13][4]=new Option("永樂","..")
			group[13][3]=new Option("東澳","..")
			group[13][2]=new Option("南澳","..")
			group[13][1]=new Option("武塔","..")
			group[13][0]=new Option("漢本","..")
			//平溪線
			group[14][6]=new Option("三貂嶺","..")
			group[14][5]=new Option("大華","..")
			group[14][4]=new Option("十分","..")
			group[14][3]=new Option("望古","..")
			group[14][2]=new Option("嶺腳","..")
			group[14][1]=new Option("平溪","..")
			group[14][0]=new Option("菁桐","..")
			//內灣線
			group[15][0]=new Option("新竹","..")
			group[15][1]=new Option("北新竹","..")
			group[15][2]=new Option("千甲","..")
			group[15][3]=new Option("新莊","..")
			group[15][4]=new Option("竹中","..")
			group[15][5]=new Option("六家","..")
			group[15][6]=new Option("上員","..")
			group[15][7]=new Option("榮華","..")
			group[15][8]=new Option("竹東","..")
			group[15][9]=new Option("橫山","..")
			group[15][10]=new Option("九讚頭","..")
			group[15][11]=new Option("合興","..")
			group[15][12]=new Option("富貴","..")
			group[15][13]=new Option("內灣","..")
			//集集線
			group[16][0]=new Option("二水","..")
			group[16][1]=new Option("源泉","..")
			group[16][2]=new Option("濁水","..")
			group[16][3]=new Option("龍泉","..")
			group[16][4]=new Option("集集","..")
			group[16][5]=new Option("水里","..")
			group[16][6]=new Option("車埕","..")
			//沙崙線
			group[17][0]=new Option("長榮大學","..")
			group[17][1]=new Option("沙崙","..")
			//深澳線
			group[18][0]=new Option("海科館","..")

				var temp;
				function redirect(x,y){
					if (y==0){
						temp=document.train.sub1;
					}
					else if(y==1){
						temp=document.train.sub2;
					}
					for (m=temp.options.length-1;m>0;m--){
						temp.options[m]=null
					}
					for (i=0;i<group[x].length;i++){
						temp.options[i]=new Option(group[x][i].text,group[x][i].value)
					}
					temp.options[0].selected=true
				}
		</script>
		<script type="text/javascript">
				Parse.initialize("eXa6XCYsez7lkZpf2ytbtRinq0STc1w9NvJkkf4p", "H4gpX9rYLfaYccdgjxP6OH48bPfK2jHeM8e1dr8Z");
				var from;
				var to;
				var now = new Date();
				var y = now.getFullYear();
				var m = now.getMonth() + 1;
				var d = now.getDate();
				set_date(y, m, d);

				var train_date = [];
				var train_info = [];
				var station = [];
				var tr_type = ["太魯閣號", "新自強", "自強", "莒光", "復興", "區間快", "區間車", "電車", "兩鐵", "單機迴送", "客迴", "普快車", "普通貨車", "普通車", "柴客", "柴快車", "柴油車" ,"柴迴", "特種", "臨時客迴", "行包專車", "試轉運", "調車列車"];
				var tr_diration = ["去程", "返程", "順行", "逆行" ,"南下", "北上"];
				var tr_line = ["不經山海線", "山線", "海線"];
				var show_data = [];
				var from_id;
				var to_id;
				get_cost(from,to);
				function set_date(y, m, d){
					year = y;
					month = m;
					day = d;
					date = (y + "-" + m + "-" + d);
				} // 取得理想格式的時間
				function get_info(url,index){
					var httpRequest;
					if (window.XMLHttpRequest) { // Mozilla, Safari, ...
						httpRequest = new XMLHttpRequest();
					} else if (window.ActiveXObject) { // IE
						httpRequest = new ActiveXObject("Microsoft.XMLHTTP");
					}
					httpRequest.open('GET', url, true);
					httpRequest.send(null);
					httpRequest.onreadystatechange = function() {
						Contents(httpRequest);
					};
					function Contents (httpRequest) {
						if (httpRequest.readyState == 4) {
							if (httpRequest.status == 200) {
								switch(index){
									case 0:
										station = JSON.parse(httpRequest.responseText);
										get_info(train_date_api, 1);
										break;
									case 1:
										train_date[day] = JSON.parse(httpRequest.responseText);
										show_data.length = 0;
										from_id = changeID(from);
										to_id = changeID(to);
										
										
										get_info(train_info_api, 2);
										console.log("from : " + from);
										console.log("To : " + to);
										console.log("date : " + date);
										break;
									case 2:
										train_info[day] = JSON.parse(httpRequest.responseText);
										find_train_time(from_id, to_id, train_date[day], train_info[day]);
										show_data.sort(function(a,b){
											return a.order > b.order ? 1 : -1;;
										});
										
										console.log(show_data);
										break;
									default:
										alert ("伺服器處理錯誤");
										break;
								}
						}
						}
					}
				} // 連API去取得資訊回來
				function changeID (id) {
					for (var i = 0; i < station.length; i++)
					{
						if (id == station[i].StationName.Zh_tw)
						{
							return station[i].StationID;
						}
					}
				} // 將中文站名換成代碼
				function find_train_time(f_id, t_id, traindate, trainInfo){
					
					for (var i = 0; i < traindate.length; i ++)
					{
						
						var buffer = 0;
						for (var j = 0; j < traindate[i].StoppingTimeElement.length; j++){
							
							if (f_id == traindate[i].StoppingTimeElement[j].StationID){
								var train = new Object();
								train.Arrival_t = traindate[i].StoppingTimeElement[j].ArrivalTime;
								buffer = traindate[i].StoppingTimeElement[j].StopSequence;
							}
							else if (t_id == traindate[i].StoppingTimeElement[j].StationID && buffer > 0){
								
								
								train.departure_t = traindate[i].StoppingTimeElement[j].DepartureTime;
								train.ID = traindate[i].TrainNo;
								train.Type = tr_type[trainInfo[i].TrainClassification];
								// train.note = trainInfo[i].Note;
								train.order = cal_time(train.Arrival_t);
								train.during_t = cal_during_t(train);
								if(trainInfo[i].TrainClassification==1||trainInfo[i].TrainClassification==2||trainInfo[i].TrainClassification==3)
								{
									train.cost = cost_3;
								}
								if(trainInfo[i].TrainClassification==3)
								{
									train.cost = cost_2;
								}
								if(trainInfo[i].TrainClassification==4||trainInfo[i].TrainClassification==5)
								{
									train.cost = cost_1;
								}
								show_data.push(train);
								
								break;
							}
						}
						
					}
				} // 從API載下來的資料中去挑選想要車次
				function cal_time(t){
					var time;
					time = parseInt(t[0]+t[1]) * 60 + parseInt(t[3]+t[4]);
					return time;
				} // 計算秒數->幫助排列從早到晚的車次
				function cal_during_t(train){
					var during = cal_time(train.departure_t) - cal_time(train.Arrival_t);
					var hour = parseInt(during / 60);
					var minute = during - hour*60;
					return (hour + "小時" + minute + "分");
				} // 計算車程所耗費的時間
				function search(){
					from = $('#train_from').val();
					to = $('#train_to').val();
					get_cost(from,to);
					set_date(c.date.getFullYear(), c.date.getMonth() + 1, c.date.getDate());
					from_id = changeID(from);
					to_id = changeID(to);
					
					get_info(train_date_api, 1);
				} // 按鈕按下後所跑的程式
				var station_api = "http://210.59.250.227:80/MOTC/v2/Rail/TRA/Station?%24format=json";
				get_info(station_api, 0);
				var train_info_api = "http://210.59.250.227:80/MOTC/v2/Rail/TRA/TrainInfo/" + date + "?%24format=json";
				var train_date_api = "http://210.59.250.227:80/MOTC/v2/Rail/TRA/StopTimes/" + date + "?%24format=json";
				
				
				var cost_1;
				var cost_2;
				var cost_3;
				function get_cost(from,to)
				{
					var cost;
					
					var query = new Parse.Query("cost_west");
					query.limit(200);
					query.find({
						success: function(results) {
						//console.log("1");
						//alert("Successfully retrieved " + results.length + " scores.");
						// Do something with the returned Parse.Object values
						for (var i = 0; i < results.length; i++) {
							var object = results[i];
							
							if(object.get('station')==from)
							{
								var from_distance = object.get('distance');
							}
							else if(object.get('station')==to)
							{
								
								var to_distance = object.get('distance');
							}
							
							//alert(object.id + ' - ' + object.get('distance'));
						}
						sub = Math.abs(to_distance - from_distance);
						if(sub<10)
						{
							cost_1=15;
							cost_2=18;
							cost_3=23;
						}
						else
						{
							cost_1=Math.ceil(1.46*sub);
							cost_2=Math.ceil(1.75*sub);
							cost_3=Math.ceil(2.27*sub);
						}
						/*console.log(cost_1);
						console.log(cost_2);
						console.log(cost_3);*/
						/*console.log(sub);
						console.log(type);
						console.log(dir);
						console.log(cost);*/
						//return cost;
						
						//alert(to_distance);
						},
						error: function(error) {
							alert("Error: " + error.code + " " + error.message);
						}
					});
				}
				function show()
				{
					console.log(show_data);
				}
		</script>
	</body>
</html>